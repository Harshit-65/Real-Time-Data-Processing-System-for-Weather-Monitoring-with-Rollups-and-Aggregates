{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./WebApp.css\";import bellIcon from\"../img/bell2.png\";import ringingBellIcon from\"../img/bell_ring2.png\";import WeatherAnalytics from\"../components/weatherAnalytics/weatherAnalytics\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Weather=()=>{const[weatherData,setWeatherData]=useState(null);const[location,setLocation]=useState(\"Delhi\");const[inputLocation,setInputLocation]=useState(location);const[alert,setAlert]=useState(false);// const [consecutiveAlerts, setConsecutiveAlerts] = useState(1);\nconst[threshold,setThreshold]=useState(20);// Default threshold in Fahrenheit\nuseEffect(()=>{const fetchWeather=async loc=>{try{const response=await axios.post(\"http://localhost:5000/current-weather\",{city:loc},{headers:{\"Content-Type\":\"application/json\"}});console.log(response.data);setWeatherData(response.data);}catch(error){console.error(\"Error fetching weather data:\",error);}};fetchWeather(location);const intervalId=setInterval(()=>{fetchWeather(location);},10000);return()=>clearInterval(intervalId);},[location]);useEffect(()=>{if(weatherData){if(weatherData.count>=1){setAlert(true);}else{setAlert(false);}}},[weatherData]);useEffect(()=>{const updateThreshold=async()=>{try{const response=await axios.post(\"http://localhost:5000/set_threshold\",{threshold:threshold},{headers:{\"Content-Type\":\"application/json\"}});}catch(error){console.error(\"Error fetching threshold data:\",error);}};updateThreshold();},[threshold]);const handleLocationChange=()=>{setLocation(inputLocation);console.log(inputLocation);};const handleThresholdChange=e=>{const value=e.target.value;if(!isNaN(value)&&value!==\"\"){setThreshold(Number(value));}};return/*#__PURE__*/_jsx(\"div\",{className:\"weather-container\",children:weatherData?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Right now in\",\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputLocation,onChange:e=>setInputLocation(e.target.value),id:\"location-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLocationChange,id:\"location-button\",children:\"Update\"}),\" It's \",weatherData.main.description.toLowerCase(),\".\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data_section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"weather_icon\",children:/*#__PURE__*/_jsx(\"img\",{src:`http://openweathermap.org/img/w/${weatherData.main.icon}.png`,alt:\"Weather Icon\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"temp\",children:`${weatherData.main.temp}째`}),/*#__PURE__*/_jsxs(\"div\",{className:\"wind_humid_section\",children:[/*#__PURE__*/_jsx(\"p\",{children:`Wind Speed: ${weatherData.main.wind} mph`}),/*#__PURE__*/_jsx(\"p\",{children:`Humidity: ${weatherData.main.humidity}%`})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:`alert-section ${alert?\"active\":\"\"}`,children:[/*#__PURE__*/_jsx(\"img\",{src:alert?ringingBellIcon:bellIcon,alt:\"Bell Icon\",className:`bell-icon ${alert?\"shaking\":\"\"}`}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Threshold: \",threshold,\"\\xB0C\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"threshold-input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"threshold\",children:\"Set Threshold (\\xB0C): \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"threshold\",value:threshold,onChange:handleThresholdChange,min:\"0\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(WeatherAnalytics,{location:location})})]})}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});};export default Weather;","map":{"version":3,"names":["React","useState","useEffect","bellIcon","ringingBellIcon","WeatherAnalytics","axios","jsx","_jsx","jsxs","_jsxs","Weather","weatherData","setWeatherData","location","setLocation","inputLocation","setInputLocation","alert","setAlert","threshold","setThreshold","fetchWeather","loc","response","post","city","headers","console","log","data","error","intervalId","setInterval","clearInterval","count","updateThreshold","handleLocationChange","handleThresholdChange","e","value","target","isNaN","Number","className","children","type","onChange","id","onClick","main","description","toLowerCase","src","icon","alt","temp","wind","humidity","htmlFor","min"],"sources":["D:/Leonidas/Downloads/project0-main/project0-main/frontend/myapp/src/container/WebApp.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./WebApp.css\";\nimport bellIcon from \"../img/bell2.png\";\nimport ringingBellIcon from \"../img/bell_ring2.png\";\nimport WeatherAnalytics from \"../components/weatherAnalytics/weatherAnalytics\";\nimport axios from \"axios\";\n\nconst Weather = () => {\n  const [weatherData, setWeatherData] = useState(null);\n  const [location, setLocation] = useState(\"Delhi\");\n  const [inputLocation, setInputLocation] = useState(location);\n  const [alert, setAlert] = useState(false);\n  // const [consecutiveAlerts, setConsecutiveAlerts] = useState(1);\n  const [threshold, setThreshold] = useState(20); // Default threshold in Fahrenheit\n\n  useEffect(() => {\n    const fetchWeather = async (loc) => {\n      try {\n        const response = await axios.post(\n          \"http://localhost:5000/current-weather\",\n          {\n            city: loc,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        );\n        console.log(response.data);\n        setWeatherData(response.data);\n      } catch (error) {\n        console.error(\"Error fetching weather data:\", error);\n      }\n    };\n\n    fetchWeather(location);\n\n    const intervalId = setInterval(() => {\n      fetchWeather(location);\n    }, 10000);\n\n    return () => clearInterval(intervalId);\n  }, [location]);\n\n  useEffect(() => {\n    if (weatherData) {\n      if (weatherData.count >= 1) {\n        setAlert(true);\n      } else {\n        setAlert(false);\n      }\n    }\n  }, [weatherData]);\n\n  useEffect(() => {\n    const updateThreshold = async () => {\n      try {\n        const response = await axios.post(\n          \"http://localhost:5000/set_threshold\",\n          {\n            threshold: threshold,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        );\n      } catch (error) {\n        console.error(\"Error fetching threshold data:\", error);\n      }\n    };\n\n    updateThreshold();\n  }, [threshold]);\n\n  const handleLocationChange = () => {\n    setLocation(inputLocation);\n    console.log(inputLocation);\n  };\n\n  const handleThresholdChange = (e) => {\n    const value = e.target.value;\n    if (!isNaN(value) && value !== \"\") {\n      setThreshold(Number(value));\n    }\n  };\n\n  return (\n    <div className=\"weather-container\">\n      {weatherData ? (\n        <div>\n          <div>\n            <h2>\n              Right now in{\" \"}\n              <input\n                type=\"text\"\n                value={inputLocation}\n                onChange={(e) => setInputLocation(e.target.value)}\n                id=\"location-input\"\n              />\n              <button onClick={handleLocationChange} id=\"location-button\">\n                Update\n              </button>\n              {\" It's \"}\n              {weatherData.main.description.toLowerCase()}.\n            </h2>\n            <div className=\"data_section\">\n              <div className=\"weather_icon\">\n                <img\n                  src={`http://openweathermap.org/img/w/${weatherData.main.icon}.png`}\n                  alt=\"Weather Icon\"\n                />\n              </div>\n              <p className=\"temp\">{`${weatherData.main.temp}째`}</p>\n              <div className=\"wind_humid_section\">\n                <p>{`Wind Speed: ${weatherData.main.wind} mph`}</p>\n                <p>{`Humidity: ${weatherData.main.humidity}%`}</p>\n              </div>\n            </div>\n\n            {/* Alert Section */}\n            <div className={`alert-section ${alert ? \"active\" : \"\"}`}>\n              <img\n                src={alert ? ringingBellIcon : bellIcon}\n                alt=\"Bell Icon\"\n                className={`bell-icon ${alert ? \"shaking\" : \"\"}`}\n              />\n              <span>Threshold: {threshold}째C</span>\n            </div>\n\n            {/* Threshold Input */}\n            <div className=\"threshold-input\">\n              <label htmlFor=\"threshold\">Set Threshold (째C): </label>\n              <input\n                type=\"number\"\n                id=\"threshold\"\n                value={threshold}\n                onChange={handleThresholdChange}\n                min=\"0\"\n              />\n            </div>\n\n            <div>\n              <WeatherAnalytics location={location} />\n            </div>\n          </div>\n        </div>\n      ) : (\n        <p>Loading...</p>\n      )}\n    </div>\n  );\n};\n\nexport default Weather;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,cAAc,CACrB,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,eAAe,KAAM,uBAAuB,CACnD,MAAO,CAAAC,gBAAgB,KAAM,iDAAiD,CAC9E,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAAGd,QAAQ,CAAC,OAAO,CAAC,CACjD,KAAM,CAACe,aAAa,CAAEC,gBAAgB,CAAC,CAAGhB,QAAQ,CAACa,QAAQ,CAAC,CAC5D,KAAM,CAACI,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CACzC;AACA,KAAM,CAACmB,SAAS,CAAEC,YAAY,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAEhDC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAoB,YAAY,CAAG,KAAO,CAAAC,GAAG,EAAK,CAClC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACmB,IAAI,CAC/B,uCAAuC,CACvC,CACEC,IAAI,CAAEH,GACR,CAAC,CACD,CACEI,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CACDC,OAAO,CAACC,GAAG,CAACL,QAAQ,CAACM,IAAI,CAAC,CAC1BjB,cAAc,CAACW,QAAQ,CAACM,IAAI,CAAC,CAC/B,CAAE,MAAOC,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CACF,CAAC,CAEDT,YAAY,CAACR,QAAQ,CAAC,CAEtB,KAAM,CAAAkB,UAAU,CAAGC,WAAW,CAAC,IAAM,CACnCX,YAAY,CAACR,QAAQ,CAAC,CACxB,CAAC,CAAE,KAAK,CAAC,CAET,MAAO,IAAMoB,aAAa,CAACF,UAAU,CAAC,CACxC,CAAC,CAAE,CAAClB,QAAQ,CAAC,CAAC,CAEdZ,SAAS,CAAC,IAAM,CACd,GAAIU,WAAW,CAAE,CACf,GAAIA,WAAW,CAACuB,KAAK,EAAI,CAAC,CAAE,CAC1BhB,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAC,IAAM,CACLA,QAAQ,CAAC,KAAK,CAAC,CACjB,CACF,CACF,CAAC,CAAE,CAACP,WAAW,CAAC,CAAC,CAEjBV,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkC,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAZ,QAAQ,CAAG,KAAM,CAAAlB,KAAK,CAACmB,IAAI,CAC/B,qCAAqC,CACrC,CACEL,SAAS,CAAEA,SACb,CAAC,CACD,CACEO,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CACF,CAAC,CACH,CAAE,MAAOI,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACxD,CACF,CAAC,CAEDK,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,CAAChB,SAAS,CAAC,CAAC,CAEf,KAAM,CAAAiB,oBAAoB,CAAGA,CAAA,GAAM,CACjCtB,WAAW,CAACC,aAAa,CAAC,CAC1BY,OAAO,CAACC,GAAG,CAACb,aAAa,CAAC,CAC5B,CAAC,CAED,KAAM,CAAAsB,qBAAqB,CAAIC,CAAC,EAAK,CACnC,KAAM,CAAAC,KAAK,CAAGD,CAAC,CAACE,MAAM,CAACD,KAAK,CAC5B,GAAI,CAACE,KAAK,CAACF,KAAK,CAAC,EAAIA,KAAK,GAAK,EAAE,CAAE,CACjCnB,YAAY,CAACsB,MAAM,CAACH,KAAK,CAAC,CAAC,CAC7B,CACF,CAAC,CAED,mBACEhC,IAAA,QAAKoC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/BjC,WAAW,cACVJ,IAAA,QAAAqC,QAAA,cACEnC,KAAA,QAAAmC,QAAA,eACEnC,KAAA,OAAAmC,QAAA,EAAI,cACU,CAAC,GAAG,cAChBrC,IAAA,UACEsC,IAAI,CAAC,MAAM,CACXN,KAAK,CAAExB,aAAc,CACrB+B,QAAQ,CAAGR,CAAC,EAAKtB,gBAAgB,CAACsB,CAAC,CAACE,MAAM,CAACD,KAAK,CAAE,CAClDQ,EAAE,CAAC,gBAAgB,CACpB,CAAC,cACFxC,IAAA,WAAQyC,OAAO,CAAEZ,oBAAqB,CAACW,EAAE,CAAC,iBAAiB,CAAAH,QAAA,CAAC,QAE5D,CAAQ,CAAC,CACR,QAAQ,CACRjC,WAAW,CAACsC,IAAI,CAACC,WAAW,CAACC,WAAW,CAAC,CAAC,CAAC,GAC9C,EAAI,CAAC,cACL1C,KAAA,QAAKkC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BrC,IAAA,QAAKoC,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3BrC,IAAA,QACE6C,GAAG,CAAE,mCAAmCzC,WAAW,CAACsC,IAAI,CAACI,IAAI,MAAO,CACpEC,GAAG,CAAC,cAAc,CACnB,CAAC,CACC,CAAC,cACN/C,IAAA,MAAGoC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAE,GAAGjC,WAAW,CAACsC,IAAI,CAACM,IAAI,GAAG,CAAI,CAAC,cACrD9C,KAAA,QAAKkC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCrC,IAAA,MAAAqC,QAAA,CAAI,eAAejC,WAAW,CAACsC,IAAI,CAACO,IAAI,MAAM,CAAI,CAAC,cACnDjD,IAAA,MAAAqC,QAAA,CAAI,aAAajC,WAAW,CAACsC,IAAI,CAACQ,QAAQ,GAAG,CAAI,CAAC,EAC/C,CAAC,EACH,CAAC,cAGNhD,KAAA,QAAKkC,SAAS,CAAE,iBAAiB1B,KAAK,CAAG,QAAQ,CAAG,EAAE,EAAG,CAAA2B,QAAA,eACvDrC,IAAA,QACE6C,GAAG,CAAEnC,KAAK,CAAGd,eAAe,CAAGD,QAAS,CACxCoD,GAAG,CAAC,WAAW,CACfX,SAAS,CAAE,aAAa1B,KAAK,CAAG,SAAS,CAAG,EAAE,EAAG,CAClD,CAAC,cACFR,KAAA,SAAAmC,QAAA,EAAM,aAAW,CAACzB,SAAS,CAAC,OAAE,EAAM,CAAC,EAClC,CAAC,cAGNV,KAAA,QAAKkC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BrC,IAAA,UAAOmD,OAAO,CAAC,WAAW,CAAAd,QAAA,CAAC,yBAAoB,CAAO,CAAC,cACvDrC,IAAA,UACEsC,IAAI,CAAC,QAAQ,CACbE,EAAE,CAAC,WAAW,CACdR,KAAK,CAAEpB,SAAU,CACjB2B,QAAQ,CAAET,qBAAsB,CAChCsB,GAAG,CAAC,GAAG,CACR,CAAC,EACC,CAAC,cAENpD,IAAA,QAAAqC,QAAA,cACErC,IAAA,CAACH,gBAAgB,EAACS,QAAQ,CAAEA,QAAS,CAAE,CAAC,CACrC,CAAC,EACH,CAAC,CACH,CAAC,cAENN,IAAA,MAAAqC,QAAA,CAAG,YAAU,CAAG,CACjB,CACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAlC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}